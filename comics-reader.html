<head>
  <title>Comics Reader</title>

  <!-- GOOGLE FEEDS API -->
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">
    google.load("feeds", "1");
    var currentSource;
    var container;

    function initialize() {
      document.getElementById("feed").innerHTML = "";
      var feed = new google.feeds.Feed(currentSource);
      feed.load(function(result) {
        feed.setResultFormat(google.feeds.Feed.XML_FORMAT);
        if (!result.error) {
          console.log("result", result);
          container = document.getElementById("feed");
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var li = document.createElement("li");
            // var a = document.createElement("a");
            // a.appendChild(document.createTextNode(entry.title));
            // a.setAttribute("href", entry.link);
            li.setAttribute("class", "feed-link");
            li.innerHTML = "<a href=" + entry.link +">" + entry.title + "</a>";
            container.appendChild(li);
          }
          console.dir(container);
        }
      });
    }
    google.setOnLoadCallback(initialize);
  </script>
</head>

<body>

  <!-- TESTING GOOGLE FEEDS API -->
  <div>
    <ul id="feed">
      <li></li>
    </ul>
  </div>


  <div class="container">
    <header>
      <h1>Comics Reader ({{incompleteCount}})</h1>

      <label class="hide-completed">
        <input type="checkbox" checked="{{hideCompleted}}" /> Hide Read Comics
      </label>

      {{> loginButtons}} {{#if currentUser}}
      <form class="new-task">
        <input type="text" name="text" placeholder="Enter an RSS URL" />
      </form>
      {{/if}}
    </header>

    <ul>
      {{#each tasks}} {{> task}} {{/each}}
    </ul>
  </div>
  <!-- end of container -->


  <iframe frameborder="0" src="{{selectedFeed}}"></iframe>

</body>

<!-- ======================================== -->
<!-- TASK LIST TEMPLATES -->
<!-- ======================================== -->

<template name="task">
  <li class="{{#if checked}}checked{{/if}} {{#if private}}private{{/if}}">
    <button class="delete">&times;</button>

    <input type="checkbox" checked="{{checked}}" class="toggle-checked" /> {{#if isOwner}}
    <button class="toggle-private">
      {{#if private}} Private {{else}} Public {{/if}}
    </button>
    {{/if}}

    <a href="{{text}}" class="source-link">{{text}}</a>
  </li>
</template>
